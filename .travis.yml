# explicitly request container-based infrastructure
sudo: false

compiler:
 - gcc-6
 - clang-3.7

env:
 # currently unused
 - CXX=gcc-6

addons:
  apt:
    sources:
      - llvm-toolchain-precise-3.7
      - ubuntu-toolchain-r-test
    packages:
      - libgsl0-dev
      - liblapack-dev
      - cppcheck
      - cmake
      - clang-3.7
      - gcc-6

script:
 - set -e
 - c++ --version
 - git submodule init
 - git submodule update
 - mkdir build
 - cd build
 - cmake ..
 - make lint
 - make test_condensing_qpoases
 - ./test_condensing_qpoases
 - make test_nmpc
 - ./test_nmpc
 - make test_chain
 - ./test_chain
