# explicitly request container-based infrastructure
sudo: false
 
env:
 - CXX="g++-6" CC="gcc-6"
 - CXX="clang++-3.7" CC="clang-3.7"

addons:
  apt:
    sources:
      - llvm-toolchain-precise-3.7
      - ubuntu-toolchain-r-test
    packages:
      - libgsl0-dev
      - liblapack-dev
      - cppcheck
      - cmake
      - clang-3.7
      - gcc-6
      - g++-6

install:
 - pushd
 - cd acados/external
 - wget http://bitbucket.org/eigen/eigen/get/3.2.10.tar.gz
 - mkdir eigen
 - tar -xf 3.2.10.tar.gz --strip-components=1 -C eigen
 - popd

script:
 - set -e
 - git submodule init
 - git submodule update
 - mkdir build
 - cd build
 - cmake ..
 - set +e
 - make lint
 - make test_condensing_qpoases
 - ./test_condensing_qpoases
 - make test_nmpc
 - ./test_nmpc
 - make test_chain
 - ./test_chain
